!function(n,t){"use strict";t.module("pouchdb",[]).constant("POUCHDB_DEFAULT_METHODS",["destroy","put","post","get","remove","bulkDocs","allDocs","putAttachment","getAttachment","removeAttachment","query","viewCleanup","info","compact","revsDiff"]).provider("pouchDB",["POUCHDB_DEFAULT_METHODS",function(n){this.methods=n,this.$get=["$q","$window",function(n,e){function r(t){return function(){return n.when(t.apply(this,arguments))}}function u(e){return function(){var r,u,o=this,c=arguments,a=n.defer(),s=function(r){return t.isDefined(u._rev)||t.isDefined(r._rev)&&(u._rev=r._rev),n.when(e.apply(o,c)).then(function(n){a.resolve(n)})["catch"](function(n){a.reject(n)})};return 1===arguments.length?(r=arguments[0]._id||null,u=arguments[0]||{}):(2===arguments.length||3===arguments.length)&&(r=arguments[1]||null,u=arguments[0]||{}),i.get(r).then(s)["catch"](s),a.promise}}function o(t){function e(t){return function(){var e=n.defer(),r=t.apply(this,arguments).on("change",function(n){return e.notify(n)}).on("uptodate",function(n){return e.notify(n)}).on("complete",function(n){return e.resolve(n)}).on("error",function(n){return e.reject(n)});return r.$promise=e.promise,r}}return t.changes=e(t.changes),t.replicate.to=e(t.replicate.to),t.replicate.from=e(t.replicate.from),t}var i,c=this.methods;return function(n,t){function a(n){i[n]="put"===n?u(i[n]):r(i[n])}return i=new e.PouchDB(n,t),c.forEach(a),o(i)}}]}])}(window,window.angular);